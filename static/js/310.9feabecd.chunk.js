"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[310],{310:function(t,n,e){e.r(n),e.d(n,{default:function(){return q}});var r=e(791),i=e(139),a=e(825),s=e(59),o=e(32),u=e(885),c=e(199),f=e(973),d=e(159),l=e(790),h=e(172),g=e.n(h);var p=e(678),v=e(184),x=(0,c.z)("div")({name:"WordContainer",class:"wxs32l4",vars:{"wxs32l4-0":[function(t){return t.isDragging?.5:1}]}}),m=(0,r.forwardRef)((function(t,n){var e,i=t.id,a=t.text,s=t.index,o=t.group,c=(0,r.useRef)(null),h=(0,r.useCallback)((function(t,n){p.h.setTargetWords(g()(p.h.targetWords,{$splice:[[t,1],[n,0,p.h.targetWords[t]]]}))}),[]),m=(0,f.L)({accept:"word",collect:function(t){return{handlerId:t.getHandlerId()}},hover:function(t,n){if("target"===o&&"target"===t.group){var e;if(!c.current)return;var r=t.index,i=s;if(r===i)return;var a=null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect(),u=(a.right-a.left)/2,f=n.getClientOffset().x-a.left;if(r<i&&f<u)return;if(r>i&&f>u)return;h(r,i),t.index=i}}}),C=(0,u.Z)(m,2),k=C[0].handlerId,j=C[1],S=(0,d.c)({type:"word",item:function(){return{id:i,index:s,group:o}},collect:function(t){return{isDragging:t.isDragging()}}}),W=(0,u.Z)(S,2),y=W[0].isDragging;return(0,W[1])(j(c)),(0,v.jsx)(x,{ref:(e=[c,n],function(t){e.forEach((function(n){"function"===typeof n?n(t):null!=n&&(n.current=t)}))}),isDragging:y,"data-handler-id":k,children:(0,v.jsx)(l.Z,{text:a})})}));e(617);var C=e(982),k=function(t,n){return t.id>n.id?1:t.id<n.id?-1:0},j=(0,c.z)("div")({name:"CloudContainer",class:"c1f83loz"}),S=function(t){var n=t.group,e=t.children,i=(0,r.useCallback)((function(t){p.h.setTargetWords(g()(p.h.targetWords,{$push:[p.h.startWords[t]]})),p.h.setStartWords(g()(p.h.startWords,{$splice:[[t,1]]}))}),[]),a=(0,r.useCallback)((function(t){p.h.setStartWords(g()(p.h.startWords,{$push:[p.h.targetWords[t]]})),p.h.setTargetWords(g()(p.h.targetWords,{$splice:[[t,1]]}))}),[]),s=(0,f.L)({accept:"word",drop:function(t){var e=t.index;"target"===n&&"start"===t.group&&i(e),"start"===n&&"target"===t.group&&(a(e),setTimeout((function(){return p.h.setStartWords((0,C.Z)(p.h.startWords).sort(k))}),500))}}),o=(0,u.Z)(s,2)[1];return(0,v.jsx)(j,{ref:o,children:e})};e(707);var W=(0,c.z)("button")({name:"PrimaryButton",class:"pn8b0vq"}),y=function(t){var n=t.onClick;return(0,v.jsx)(W,{onClick:n,children:"Check"})};e(288);var b=(0,c.z)("div")({name:"CheckSentenceControlsContainer",class:"c1x3e29a"}),w=(0,c.z)("div")({name:"ButtonContainer",class:"bnqja4n",vars:{"bnqja4n-0":[function(t){return t.showStatus?"12px":"-32px"}]}}),Z=(0,c.z)("div")({name:"VerificationStatusContainer",class:"vpmzgjx",vars:{"vpmzgjx-0":[function(t){return t.isCorrect?"#17d217":"#f31616"}]}}),z=(0,o.Pi)((function(){var t=(0,r.useState)(!1),n=(0,u.Z)(t,2),e=n[0],i=n[1],a=(0,r.useState)(!1),s=(0,u.Z)(a,2),o=s[0],c=s[1];return(0,v.jsxs)(b,{children:[(0,v.jsx)(Z,{isCorrect:e,children:e?(0,v.jsx)(l.Z,{text:"Correct!"}):(0,v.jsx)(l.Z,{text:"Something is wrong!"})}),(0,v.jsx)(w,{showStatus:o,children:(0,v.jsx)(y,{onClick:function(){if(p.h.setSentenceToCheck(),p.h.sentenceToCheck!==p.h.currentSentence.en&&i(!1),p.h.sentenceToCheck===p.h.currentSentence.en){var t=new SpeechSynthesisUtterance(p.h.sentenceToCheck);t.lang="en-US",i(!0),speechSynthesis.speaking||speechSynthesis.speak(t)}c(!0),setTimeout((function(){return c(!1)}),3e3)}})})]})}));e(746);var T=function(t){var n=(0,r.useRef)();return(0,r.useEffect)((function(){n.current=t}),[t]),n.current},D=function(t){var n={};return r.Children.map(t,(function(t){var e=t.ref.current;e&&(n[t.key]=e.getBoundingClientRect())})),n},R=function(t){var n=t.children,e=(0,r.useState)({}),i=(0,u.Z)(e,2),a=i[0],s=i[1],o=(0,r.useState)({}),c=(0,u.Z)(o,2),f=c[0],d=c[1],l=T(n);return(0,r.useLayoutEffect)((function(){s(D(n))}),[n]),(0,r.useLayoutEffect)((function(){l&&d(D(l))}),[l]),(0,r.useEffect)((function(){var t=Object.keys(f).length;r.Children.map(n,(function(n){if(t){var e=n.ref.current,r=f[n.key],i=a[n.key];if(r&&i){var s=r.left-i.left,o=r.bottom-i.bottom;0===s&&0===o||requestAnimationFrame((function(){e&&(e.style.transform="translate(".concat(s,"px, ").concat(o,"px)"),e.style.transition="transform 0s",requestAnimationFrame((function(){e.style.transform="",e.style.transition="transform 500ms"})))}))}}}))}),[a,f,n]),n},q=(0,o.Pi)((function(){var t,n,e="ontouchstart"in window||navigator.maxTouchPoints>0?s.zr:a.PD,o=(0,r.useCallback)((function(t,n,e){return(0,v.jsx)(m,{id:t.id,text:t.text,index:n,group:e,ref:(0,r.createRef)()},t.id+t.text)}),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.W,{backend:e,children:[(0,v.jsx)(S,{group:"target",children:null===(t=p.h.targetWords)||void 0===t?void 0:t.map((function(t,n){return o(t,n,"target")}))}),(0,v.jsx)(S,{group:"start",children:(0,v.jsx)(R,{children:null===(n=p.h.startWords)||void 0===n?void 0:n.map((function(t,n){return o(t,n,"start")}))})})]}),(0,v.jsx)(z,{})]})}))},288:function(t,n,e){e.r(n),n.default={}},746:function(t,n,e){e.r(n),n.default={}},707:function(t,n,e){e.r(n),n.default={}},617:function(t,n,e){e.r(n),n.default={}}}]);
//# sourceMappingURL=310.9feabecd.chunk.js.map
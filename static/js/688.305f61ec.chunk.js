"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[688],{688:function(t,e,n){n.r(e),n.d(e,{default:function(){return q}});var r=n(791),i=n(139),a=n(825),s=n(59),o=n(32),u=n(885),c=n(199),f=n(973),d=n(159),l=n(790),h=n(172),g=n.n(h);var v=n(727),p=n(184),x=(0,c.z)("div")({name:"WordContainer",class:"wxs32l4",vars:{"wxs32l4-0":[function(t){return t.isDragging?.5:1}]}}),m=(0,r.forwardRef)((function(t,e){var n,i=t.id,a=t.text,s=t.index,o=t.group,c=(0,r.useRef)(null),h=(0,r.useCallback)((function(t,e){v.h.setTargetWords(g()(v.h.targetWords,{$splice:[[t,1],[e,0,v.h.targetWords[t]]]}))}),[]),m=(0,f.L)({accept:"word",collect:function(t){return{handlerId:t.getHandlerId()}},hover:function(t,e){if("target"===o&&"target"===t.group){var n;if(!c.current)return;var r=t.index,i=s;if(r===i)return;var a=null===(n=c.current)||void 0===n?void 0:n.getBoundingClientRect(),u=(a.right-a.left)/2,f=e.getClientOffset().x-a.left;if(r<i&&f<u)return;if(r>i&&f>u)return;h(r,i),t.index=i}}}),C=(0,u.Z)(m,2),k=C[0].handlerId,j=C[1],S=(0,d.c)({type:"word",item:function(){return{id:i,index:s,group:o}},collect:function(t){return{isDragging:t.isDragging()}}}),W=(0,u.Z)(S,2),y=W[0].isDragging;return(0,W[1])(j(c)),(0,p.jsx)(x,{ref:(n=[c,e],function(t){n.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}),isDragging:y,"data-handler-id":k,children:(0,p.jsx)(l.Z,{text:a})})}));n(617);var C=n(982),k=function(t,e){return t.id>e.id?1:t.id<e.id?-1:0},j=(0,c.z)("div")({name:"CloudContainer",class:"c1f83loz"}),S=function(t){var e=t.group,n=t.children,i=(0,r.useCallback)((function(t){v.h.setTargetWords(g()(v.h.targetWords,{$push:[v.h.startWords[t]]})),v.h.setStartWords(g()(v.h.startWords,{$splice:[[t,1]]}))}),[]),a=(0,r.useCallback)((function(t){v.h.setStartWords(g()(v.h.startWords,{$push:[v.h.targetWords[t]]})),v.h.setTargetWords(g()(v.h.targetWords,{$splice:[[t,1]]}))}),[]),s=(0,f.L)({accept:"word",drop:function(t){var n=t.index;"target"===e&&"start"===t.group&&i(n),"start"===e&&"target"===t.group&&(a(n),setTimeout((function(){return v.h.setStartWords((0,C.Z)(v.h.startWords).sort(k))}),500))}}),o=(0,u.Z)(s,2)[1];return(0,p.jsx)(j,{ref:o,children:n})};n(707);var W=(0,c.z)("button")({name:"PrimaryButton",class:"pn8b0vq"}),y=function(t){var e=t.onClick;return(0,p.jsx)(W,{onClick:e,children:"Check"})};n(288);var w=(0,c.z)("div")({name:"CheckSentenceControlsContainer",class:"c1x3e29a"}),b=(0,c.z)("div")({name:"ButtonContainer",class:"bnqja4n",vars:{"bnqja4n-0":[function(t){return t.showStatus?"50px":"0"}]}}),T=(0,c.z)("div")({name:"VerificationStatusContainer",class:"vpmzgjx",vars:{"vpmzgjx-0":[function(t){return t.isCorrect?"#17d217":"#f31616"}]}}),Z=(0,o.Pi)((function(){var t=(0,r.useState)(!1),e=(0,u.Z)(t,2),n=e[0],i=e[1],a=(0,r.useState)(!1),s=(0,u.Z)(a,2),o=s[0],c=s[1];return(0,p.jsxs)(w,{children:[(0,p.jsx)(T,{isCorrect:n,children:n?(0,p.jsx)(l.Z,{text:"Correct!"}):(0,p.jsx)(l.Z,{text:"Something is wrong!"})}),(0,p.jsx)(b,{showStatus:o,children:(0,p.jsx)(y,{onClick:function(){if(v.h.setSentenceToCheck(),v.h.sentenceToCheck!==v.h.currentSentence.en&&i(!1),v.h.sentenceToCheck===v.h.currentSentence.en){var t=new SpeechSynthesisUtterance(v.h.sentenceToCheck);t.lang="en-US",i(!0),setTimeout((function(){return v.h.renderNewSentence()}),3e3),speechSynthesis.speaking||speechSynthesis.speak(t)}c(!0),setTimeout((function(){return c(!1)}),1500)}})})]})}));n(746);var z=function(t){var e=(0,r.useRef)();return(0,r.useEffect)((function(){e.current=t}),[t]),e.current},D=function(t){var e={};return r.Children.map(t,(function(t){var n=t.ref.current;e[t.key]=n.getBoundingClientRect()})),e},R=function(t){var e=t.children,n=z(e),i=(0,r.useState)({}),a=(0,u.Z)(i,2),s=a[0],o=a[1],c=(0,r.useState)({}),f=(0,u.Z)(c,2),d=f[0],l=f[1];return(0,r.useLayoutEffect)((function(){o(D(e))}),[e]),(0,r.useLayoutEffect)((function(){n&&l(D(n))}),[n]),(0,r.useEffect)((function(){var t=Object.keys(d).length;r.Children.map(e,(function(e){if(t){var n=e.ref.current,r=d[e.key],i=s[e.key];if(r&&i){var a=r.left-i.left,o=r.bottom-i.bottom;0===a&&0===o||requestAnimationFrame((function(){n.style.transform="translate3d(".concat(a,"px, ").concat(o,"px, 0)"),n.style.transition="transform 0s",requestAnimationFrame((function(){n.style.transform="",n.style.transition="transform 500ms"}))}))}}}))}),[s,d,e]),e},q=(0,o.Pi)((function(){var t,e,n="ontouchstart"in window||navigator.maxTouchPoints>0?s.zr:a.PD,o=(0,r.useCallback)((function(t,e,n){return(0,p.jsx)(m,{id:t.id,text:t.text,index:e,group:n,ref:(0,r.createRef)()},t.id+t.text)}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(i.W,{backend:n,children:[(0,p.jsx)(S,{group:"target",children:null===(t=v.h.targetWords)||void 0===t?void 0:t.map((function(t,e){return o(t,e,"target")}))}),(0,p.jsx)(S,{group:"start",children:(0,p.jsx)(R,{children:null===(e=v.h.startWords)||void 0===e?void 0:e.map((function(t,e){return o(t,e,"start")}))})})]}),(0,p.jsx)(Z,{})]})}))},288:function(t,e,n){n.r(e),e.default={}},746:function(t,e,n){n.r(e),e.default={}},707:function(t,e,n){n.r(e),e.default={}},617:function(t,e,n){n.r(e),e.default={}}}]);
//# sourceMappingURL=688.305f61ec.chunk.js.map